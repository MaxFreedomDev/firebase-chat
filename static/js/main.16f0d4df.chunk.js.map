{"version":3,"sources":["components/chat/chat.module.css","components/login/login.module.css","components/navbar/navbar.module.css","components/loader/loader.module.css","utils/const.ts","components/navbar/navbar.tsx","components/login/login.tsx","components/loader/loader.tsx","routes.ts","components/chat/chat.tsx","components/app-router.tsx","App.tsx","index.tsx"],"names":["module","exports","LOGIN_ROUTE","CHAT_ROUTE","Navbar","auth","useContext","Context","useAuthState","user","className","styles","container","logoContainer","login","onClick","signOut","to","Login","a","firebase","GoogleAuthProvider","provider","signInWithPopup","style","height","window","innerHeight","content","contentBox","btn","btnText","Loader","spinnerContainer","spinner","publicRoutes","path","Component","privateRoutes","firestore","useState","value","setValue","useCollectionData","collection","orderBy","messages","loading","map","message","containerMessage","border","uid","marginLeft","containerMessageBubble","messageHeader","backgroundImage","photoUrl","avatar","messageOwner","displayName","messageContent","text","inputContainer","cols","onChange","e","target","autoFocus","add","photoURL","createdAt","FieldValue","serverTimestamp","then","AppRouter","component","exact","App","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","createContext","ReactDOM","render","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.16f0d4df.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"chat_container__3mkhr\",\"content\":\"chat_content__Fi5_U\",\"inputContainer\":\"chat_inputContainer__190wH\",\"containerMessage\":\"chat_containerMessage__3pqIG\",\"messageHeader\":\"chat_messageHeader__2xE5O\",\"messageOwner\":\"chat_messageOwner__3Jf_b\",\"messageContent\":\"chat_messageContent__2ABeD\",\"avatar\":\"chat_avatar__1bqrl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"login_container__zjqad\",\"content\":\"login_content__3scx3\",\"btn\":\"login_btn__3aEG9\",\"btnText\":\"login_btnText__29sAH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"navbar_container__2aRoM\",\"logoContainer\":\"navbar_logoContainer__35gIX\",\"login\":\"navbar_login__1aCbL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinnerContainer\":\"loader_spinnerContainer__1K5MV\",\"spinner\":\"loader_spinner__1wela\"};","export const LOGIN_ROUTE = \"/login\";\r\nexport const CHAT_ROUTE = \"/chat\";","import React, { useContext } from \"react\";\nimport styles from \"./navbar.module.css\";\nimport { NavLink } from \"react-router-dom\";\nimport { LOGIN_ROUTE } from \"../../utils/const\";\nimport { Context } from \"../../index\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\n\nconst Navbar: React.FC = () => {\n  const { auth } = useContext(Context);\n  const [user] = useAuthState(auth);\n  return (\n    <div className={styles.container}>\n      <div className={styles.logoContainer}>\n        <label>Dark</label>\n        <label>chat</label>\n      </div>\n      <div className={styles.login}>\n        {user ? (\n          <button onClick={() => auth.signOut()}>Выйти</button>\n        ) : (\n          <NavLink to={LOGIN_ROUTE}>Войти</NavLink>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Navbar;\n","import React, { useContext } from \"react\";\nimport styles from \"./login.module.css\";\nimport { Context } from \"../../index\";\nimport firebase from \"firebase/app\";\n\nconst Login: React.FC = () => {\n  const { auth } = useContext(Context);\n  const login = async () => {\n    const provider = await new firebase.auth.GoogleAuthProvider();\n    const { user } = auth.signInWithPopup(provider);\n  };\n\n  return (\n    <div\n      className={styles.container}\n      style={{ height: window.innerHeight - 50 }}\n    >\n      <div className={styles.content}>\n        <div className={styles.contentBox}>\n          <button className={styles.btn} onClick={login}>\n            <span className={styles.btnText}>Войти с помощью Google</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n","import React from \"react\";\nimport styles from \"./loader.module.css\";\n\ninterface Props {\n  height: string;\n}\n\nconst Loader: React.FC<Props> = ({ height }) => {\n  return (\n    <div\n      className={styles.spinnerContainer}\n      style={{ height: height === \"auto\" ? \"60vh\" : window.innerHeight - 50 }}\n    >\n      <div className={styles.spinner}>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n      </div>\n    </div>\n  );\n};\n\nexport default Loader;\n","import {CHAT_ROUTE, LOGIN_ROUTE} from \"./utils/const\";\r\nimport Login from \"./components/login/login\";\r\nimport Chat from \"./components/chat/chat\";\r\n\r\nexport const publicRoutes = [\r\n    {\r\n        path: LOGIN_ROUTE,\r\n        Component: Login\r\n    }\r\n];\r\n\r\nexport const privateRoutes = [\r\n    {\r\n        path: CHAT_ROUTE,\r\n        Component: Chat\r\n    }\r\n];","import React, { useContext, useState } from \"react\";\nimport { Context } from \"../../index\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport styles from \"./chat.module.css\";\nimport { useCollectionData } from \"react-firebase-hooks/firestore\";\nimport Loader from \"../loader/loader\";\n\nconst Chat: React.FC = () => {\n  const { auth, firestore, firebase } = useContext(Context);\n  const [user] = useAuthState(auth);\n  const [value, setValue] = useState(\"\");\n  const [messages, loading] = useCollectionData(\n    firestore.collection(\"messages\").orderBy(\"createdAt\")\n  );\n  const sendMessage = () => {\n    firestore\n      .collection(\"messages\")\n      .add({\n        uid: user.uid,\n        displayName: user.displayName,\n        photoUrl: user.photoURL,\n        text: value,\n        createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n      })\n      .then(() => {});\n    setValue(\"\");\n  };\n\n  return (\n    <div\n      className={styles.container}\n      style={{ height: window.innerHeight - 50 }}\n    >\n      <div className={styles.content}>\n        {!loading ? (\n          messages?.map((message: any) => (\n            <div\n              className={styles.containerMessage}\n              key={message.uid}\n              style={{\n                border:\n                  user.uid === message.uid\n                    ? \"2px solid #FBDA31\"\n                    : \"2px solid #7AA4C2 \",\n                marginLeft: user.uid === message.uid ? \"auto\" : \"10px\",\n              }}\n            >\n              <div className={styles.containerMessageBubble}>\n                <div className={styles.messageHeader}>\n                  <div\n                    style={{ backgroundImage: `url(${message.photoUrl})` }}\n                    className={styles.avatar}\n                  />\n                  <span className={styles.messageOwner}>\n                    {message.displayName}\n                  </span>\n                </div>\n                <p className={styles.messageContent}>{message.text}</p>\n              </div>\n            </div>\n          ))\n        ) : (\n          <Loader height={\"auto\"} />\n        )}\n      </div>\n      <div className={styles.inputContainer}>\n        <textarea\n          cols={4}\n          value={value}\n          onChange={(e) => setValue(e.target.value)}\n          autoFocus\n        />\n        <button onClick={sendMessage}>Отправить</button>\n      </div>\n    </div>\n  );\n};\n\nexport default Chat;\n","import React, { useContext } from \"react\";\nimport { Route, Switch, Redirect } from \"react-router-dom\";\nimport { privateRoutes, publicRoutes } from \"../routes\";\nimport { CHAT_ROUTE, LOGIN_ROUTE } from \"../utils/const\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { Context } from \"../index\";\n\nconst AppRouter: React.FC = () => {\n  const { auth } = useContext(Context);\n  const [user] = useAuthState(auth);\n  return user ? (\n    <Switch>\n      {privateRoutes.map(({ path, Component }) => (\n        <Route path={path} component={Component} exact={true} key={path} />\n      ))}\n      <Redirect to={CHAT_ROUTE} />\n    </Switch>\n  ) : (\n    <Switch>\n      {publicRoutes.map(({ path, Component }) => (\n        <Route path={path} component={Component} exact={true} key={path} />\n      ))}\n      <Redirect to={LOGIN_ROUTE} />\n    </Switch>\n  );\n};\nexport default AppRouter;\n","import React, { useContext } from \"react\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport \"./App.css\";\nimport Navbar from \"./components/navbar/navbar\";\nimport AppRouter from \"./components/app-router\";\nimport { Context } from \"./index\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport Loader from \"./components/loader/loader\";\n\nconst App: React.FC = () => {\n  const { auth } = useContext(Context);\n  const [user, loading, error] = useAuthState(auth);\n\n  if (loading) {\n    return <Loader height={\"\"} />;\n  }\n\n  return (\n    <BrowserRouter>\n      <Navbar />\n      <AppRouter />\n    </BrowserRouter>\n  );\n};\n\nexport default App;\n","import React, { createContext } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport firebase from \"firebase/app\";\nimport \"firebase/firestore\";\nimport \"firebase/auth\";\n\n// Initialize Firebase\nfirebase.initializeApp({\n  apiKey: \"AIzaSyDsoD9Cyk_ajnBehEmiJnGe9a42iGo8yS4\",\n  authDomain: \"fir-chat-10380.firebaseapp.com\",\n  projectId: \"fir-chat-10380\",\n  storageBucket: \"fir-chat-10380.appspot.com\",\n  messagingSenderId: \"111235902142\",\n  appId: \"1:111235902142:web:06d55e8c0a715a1690ccef\",\n});\n\nexport const Context = createContext<any | null>(null);\nconst auth = firebase.auth();\nconst firestore = firebase.firestore();\n\nReactDOM.render(\n  <Context.Provider value={{ auth, firestore, firebase }}>\n    <App />\n  </Context.Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}